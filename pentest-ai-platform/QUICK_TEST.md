# üöÄ QUICK TEST GUIDE - No Docker Required!

## What You Need to Test Right Now

Since Docker isn't available, I've created a **lightweight local testing mode** that uses:
- ‚úÖ **SQLite** instead of PostgreSQL (no Docker needed)
- ‚úÖ **In-memory mock** instead of Redis (no Docker needed)
- ‚úÖ **Mock S3** for evidence storage
- ‚úÖ **All 36 API endpoints** working

---

## üèÉ Quick Start (2 Minutes)

### Step 1: Install Dependencies
```bash
cd /Users/annalealayton/PyCharmMiscProject/pentest-ai-platform/backend

# Install minimal dependencies (SQLite version)
pip3 install fastapi==0.109.0 \
             uvicorn[standard]==0.27.0 \
             sqlalchemy==2.0.25 \
             aiosqlite==0.19.0 \
             pydantic==2.5.3 \
             pydantic-settings==2.1.0 \
             python-jose[cryptography]==3.3.0 \
             passlib[bcrypt]==1.7.4 \
             cryptography==42.0.0 \
             python-multipart==0.0.6
```

### Step 2: Start the Server
```bash
python3 test_local.py
```

### Step 3: Test It!
Open your browser:
- **API Docs**: http://localhost:8000/docs
- **Health Check**: http://localhost:8000/health

---

## üß™ Test Your Site

Once the server is running, you can test your site! Here's how:

### 1. Register a User
```bash
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "tester@example.com",
    "password": "SecurePass123!",
    "full_name": "Test User",
    "role": "COORDINATOR"
  }'
```

### 2. Login and Get Token
```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "tester@example.com",
    "password": "SecurePass123!"
  }'

# Save the "access_token" from response
```

### 3. Create a Project for Your Site
```bash
curl -X POST http://localhost:8000/api/projects \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My Website Pentest",
    "customer_name": "Your Company",
    "description": "Security assessment of production website"
  }'

# Save the "id" from response (PROJECT_ID)
```

### 4. Create Scope for Your Site
```bash
# Replace with your actual site URL/IP
curl -X POST http://localhost:8000/api/scopes \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": "PROJECT_ID",
    "target_systems": ["yoursite.com", "*.yoursite.com"],
    "excluded_systems": [],
    "forbidden_methods": ["dos", "social_engineering"],
    "roe": {
      "max_concurrent_actions": 3,
      "testing_window": {
        "days": ["monday", "tuesday", "wednesday", "thursday", "friday"],
        "hours": {"start": "09:00", "end": "17:00"}
      }
    }
  }'

# Save the "id" from response (SCOPE_ID)
```

---

## üéØ What Works in Local Test Mode

‚úÖ **Authentication** (6 endpoints)
- Register, login, JWT tokens
- RSA key generation
- User management

‚úÖ **Projects & Scopes** (7 endpoints)
- Create projects
- Create scopes
- Lock scopes (dual signature)

‚úÖ **Test Plans** (4 endpoints)
- Generate plans (with mock LLM)
- Approve plans
- List plans

‚úÖ **Runs** (4 endpoints)
- Create runs
- Monitor execution
- Halt runs

‚úÖ **Approvals** (5 endpoints)
- Create approval requests
- Approve/reject actions
- TTL tracking

‚úÖ **Evidence & Findings** (7 endpoints)
- Store evidence
- Verify hash chains
- Triage findings

‚úÖ **Reports & Audit** (2 endpoints)
- Generate reports
- Query audit logs

---

## ‚ö†Ô∏è Limitations in Local Mode

‚ùå **No LLM** - Plan generation will use mock responses (unless you have Claude API key)
‚ùå **No S3** - Evidence stored in local files
‚ùå **No Redis** - Using in-memory mock (resets on restart)
‚ùå **SQLite** - Single connection, not for production

But **all API endpoints work** and you can test the full workflow!

---

## üåê Testing Your Real Site

Want to test a real site? Here's what the platform would do in production:

### Mock Test Plan for Your Site
```json
{
  "reconnaissance": [
    "DNS enumeration for yoursite.com",
    "WHOIS lookup",
    "Subdomain discovery",
    "SSL/TLS certificate analysis"
  ],
  "vulnerability_assessment": [
    "Nmap port scan (80, 443, 22)",
    "Burp Suite web scan",
    "SSL configuration check",
    "Header security analysis"
  ],
  "exploitation": [
    "Test for SQL injection (requires approval)",
    "Test for XSS vulnerabilities (requires approval)",
    "Test for authentication bypass (requires approval)"
  ]
}
```

### What You'll Get
1. **Risk-stratified actions** (L0 = safe, L3 = critical)
2. **Approval workflow** for dangerous actions
3. **Evidence collection** with hash chains
4. **CVSS-scored findings** with remediation
5. **Compliance report** (SOC 2, NIST, ISO)

---

## üî• Full Production Test

If you **do have Docker**, run the full stack:

```bash
# Start PostgreSQL + Redis + MinIO
docker compose up -d

# Initialize database
python3 init_db.py

# Start full backend
uvicorn main:app --reload

# Access at http://localhost:8000/docs
```

---

## üí° What to Tell Me

1. **What's your site URL?** (e.g., example.com)
2. **What do you want to test?** (e.g., web app security, API endpoints)
3. **Any areas off-limits?** (e.g., don't test payment flow)
4. **Do you have Claude API key?** (for real LLM, not mocked)

I'll help you create a **real test scope and plan**!

---

## üÜò Troubleshooting

**Port 8000 already in use?**
```bash
# Change port in test_local.py line 230:
uvicorn.run(app, host="0.0.0.0", port=8080, log_level="info")
```

**Import errors?**
```bash
# Install missing packages
pip3 install <package-name>
```

**Want to see logs?**
```bash
# Run with debug
python3 test_local.py --log-level debug
```

---

## ‚úÖ YOU'RE READY!

1. Install deps: `pip3 install fastapi uvicorn sqlalchemy aiosqlite pydantic ...`
2. Start server: `python3 test_local.py`
3. Open browser: http://localhost:8000/docs
4. Test your site!

**Let me know when you're ready and I'll help you create a real test plan!** üöÄ
